{% extends "base.html" %}

{% block content %}
<div class="fluent-card p-4">
    <h2 class="mb-4">å¤„ç†çŠ¶æ€</h2>
    
    <div class="mb-4">
        <span class="status-indicator status-{{ status.status }}">
            {{ status.status | upper }}
        </span>
        <span class="text-muted ms-2">ä»»åŠ¡ID: {{ job_id }}</span>
    </div>

    <div class="mb-4">
        <div class="d-flex justify-content-between mb-2">
            <span id="status-message">{{ status.message }}</span>
            <span id="progress-text">{{ status.progress }}%</span>
        </div>
        <div class="fluent-progress">
            <div id="progress-bar" class="fluent-progress-bar" style="width: {{ status.progress }}%"></div>
        </div>
    </div>

    <div id="result-info" class="fluent-alert fluent-alert-success" style="display: none;">
        <h5>ğŸ‰ å¤„ç†å®Œæˆï¼</h5>
        <p id="completion-message" class="mb-3"></p>
        <a id="download-link" href="#" class="btn btn-primary">ä¸‹è½½æµ‹è¯•ç”¨ä¾‹</a>
    </div>

    <div id="error-info" class="fluent-alert fluent-alert-error" style="display: none;">
        <h5>âŒ å¤„ç†å¤±è´¥</h5>
        <p id="error-message"></p>
        <p class="small mt-2">è¯·æ£€æŸ¥æ–‡ä»¶æ ¼å¼å’Œé…ç½®ï¼Œç„¶åé‡è¯•ã€‚</p>
    </div>

    <div class="mt-4">
        <h5 class="mb-3">æ§åˆ¶å°è¾“å‡º</h5>
        <div id="console-output" class="console-output">
            <div class="console-line console-info">æ­£åœ¨åŠ è½½æ—¥å¿—...</div>
        </div>
    </div>
</div>

<div class="d-flex gap-3 mt-4">
    <a href="{{ url_for('upload.upload_file') }}" class="btn btn-primary">ä¸Šä¼ æ–°æ–‡ä»¶</a>
    <a href="{{ url_for('config.config_management') }}" class="btn btn-outline-secondary">æ£€æŸ¥é…ç½®</a>
    <a href="{{ url_for('upload.upload_file') }}" class="btn btn-outline-secondary">è¿”å›ä¸Šä¼ é¡µé¢</a>
</div>

<input type="hidden" id="job-id" value="{{ job_id }}">
{% endblock %}

{% block scripts %}
<script>
// é¡µé¢åŠ è½½å®Œæˆåä¼šè‡ªåŠ¨åˆå§‹åŒ–ç›‘æ§
</script>
{% endblock %}